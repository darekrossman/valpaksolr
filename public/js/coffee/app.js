// Generated by CoffeeScript 1.6.2
(function() {
  var app, appConfig, deps;

  deps = ['app.filters', 'app.services', 'app.directives', 'app.controllers', 'ngResource', 'ngCookies', 'vp.dialogs'];

  appConfig = [
    '$routeProvider', '$locationProvider', '$httpProvider', function($routeProvider, $locationProvider, $httpProvider) {
      var resInterceptor;

      $routeProvider.when('/coupons/home', {
        templateUrl: '/partials/home.jade',
        controller: 'HomeController'
      }).when('/coupons/query', {
        templateUrl: '/partials/results.layout.jade',
        controller: 'ListingController'
      }).when('/coupons/local-coupons/:category/:geo', {
        templateUrl: '/partials/results.layout.jade',
        controller: 'ListingController'
      }).when('/listing/profile/:profileId', {
        templateUrl: '/partials/business_profile.jade',
        controller: 'BusinessProfileController'
      }).when('/resources/:page', {
        action: ''
      }).when('/modal', {
        action: ''
      }).otherwise({
        redirectTo: '/'
      });
      $locationProvider.html5Mode(true).hashPrefix('!');
      resInterceptor = [
        '$rootScope', '$q', function($rootScope, $q) {
          var error, success;

          success = function(response) {
            return response;
          };
          error = function(response) {
            return $q.reject(response);
          };
          return function(promise) {
            return promise.then(success, error);
          };
        }
      ];
      return $httpProvider.responseInterceptors.push(resInterceptor);
    }
  ];

  app = angular.module('app', deps);

  app.config(appConfig);

  app.run([
    '$rootScope', '$log', 'User', function($rootScope, $log, User) {
      $rootScope.debug = $log.debug;
      $rootScope.$on('$routeChangeError', function(ev, current, previous, rejection) {
        return $log.debug("Error: " + rejection);
      });
      return (function(d) {
        var id, js, ref;

        id = 'facebook-jssdk';
        ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) {
          return;
        }
        js = d.createElement('script');
        js.id = id;
        js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        return ref.parentNode.insertBefore(js, ref);
      })(document);
    }
  ]);

}).call(this);

/*
//@ sourceMappingURL=app.map
*/
