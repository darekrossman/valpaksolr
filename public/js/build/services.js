// Generated by CoffeeScript 1.6.2
(function() {
  angular.module('app.services', ['ngResource']).factory('KeywordListings', [
    '$resource', function($resource) {
      return $resource('/solr/listings');
    }
  ]).factory('CategoryListings', [
    '$resource', function($resource) {
      return $resource('/solr/listings/:cat', {
        cat: '@cat',
        page: '@page'
      });
    }
  ]).factory('KeywordListingLoader', [
    'KeywordListings', '$q', '$location', function(KeywordListings, $q, $location) {
      return function() {
        var delay;

        delay = $q.defer();
        KeywordListings.get({
          keywords: $location.search().keywords
        }, function(listings) {
          return delay.resolve(listings);
        }, function() {
          return delay.reject('Could not get listings');
        });
        return delay.promise;
      };
    }
  ]).factory('CategoryListingsLoader', [
    'CategoryListings', '$q', '$route', '$location', function(CategoryListings, $q, $route, $location) {
      return function() {
        var delay;

        console.log($route.current);
        delay = $q.defer();
        CategoryListings.get({
          cat: $route.current.params.cat,
          page: 1
        }, function(listings) {
          return delay.resolve(listings);
        }, function() {
          return delay.reject('Could not get listings');
        });
        return delay.promise;
      };
    }
  ]).factory('BusinessProfile', [
    '$resource', function($resource) {
      return $resource('/api/profile/:id', {
        id: '@id'
      });
    }
  ]).factory('BusinessProfileLoader', [
    'BusinessProfile', '$q', '$route', function(BusinessProfile, $q, $route) {
      return function() {
        var delay;

        delay = $q.defer();
        BusinessProfile.get({
          id: $route.current.params.profileId
        }, function(profile) {
          return delay.resolve(profile);
        }, function() {
          return delay.reject('Could not get profile');
        });
        return delay.promise;
      };
    }
  ]).factory('ListingFilter', [
    '$routeParams', function($routeParams) {
      return {
        searchTerms: null,
        loading: true,
        searchText: '',
        activeFilters: {},
        lists: {
          vpPrintable: true,
          grocery: true,
          deals: true,
          sdc: true
        },
        resultsLabel: '',
        slidemenuActive: true,
        layoutOption: localStorage.getItem('layout_option') || 'grid'
      };
    }
  ]).factory;

}).call(this);
